---
title: 8月8日
copyright: true
date: 2019-08-08 10:27:32
tags:
category:
---
### Android开源框架 Aoppermission
Aoppermission是基于Aspect实现。实现过程及原理分析。Android的常用Aop有两种方式1.通过JNI Hook，2.静态织入
####  Acpect基础知识
1. 注解@Aspect，申明切面标记类
2. @Pointcut, 定义切点，标记方法
3. @Befeore 前置通知，切点前执行
4. @Around 围绕切点执行
5. @after 后置通知，切点后执行
6. @AfterReturening,返回返回值，切点返回值
7. @AfterThrowing ，异常通知，切点抛出异常
1. 首先需要依赖com.hujiang.aspectjx:gradle-android-plugin-aspectjx，配置好了所需的环境
2. 通过定义注解，包括NeedPermission,PermissionCanceled,PermissionDenied，三个注解对应这申请权限的三种情况。通过源码看他们的作用域都是Method，保留时间都是一直到运行时期，那就意味着，我们可以通过反射的技术实现想做的，而本项目也恰恰是基于反射和Aspect实现 
